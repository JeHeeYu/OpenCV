# 잡음 제거 필터링

영상 처리 관점에서 잡음(noise)란 원본 신호에 추가된 원치 않은 신호를 뜻한다.
<br>
영상에서 잡음은 주로 영상을 획득하는 과정에서 발생하며, 디지털 카메라에서 사진을 촬영하는 경우
<br>
광학적 신호를 전기적 신호로 변환하는 센서에서 주로 잡음이 추가된다.
<br>
<br>
![image](https://user-images.githubusercontent.com/87363461/203900934-db624d64-98e1-4ada-a0d8-001612a01cca.png)
<br>
<br>
카메라에서 획득되는 영산신호는 보통 위와 같은 식으로 표현한다.
<br>
<br>
f(x, y) : 실제로 카메라에서 획득되는 영상 신호
<br>
s(x, y) : 디지털 카메라에서 카메라 렌즈가 바라보는 원본 신호
<br>
n(x, y) : 영상에 추가되는 잡음
<br>
<br>
잡음이 생성되는 방식을 잡음 모델(noise model) 이라고 하며, 다양한 잡음 모델 중 가장 대표적인 잡음 모델은 가우시안 잡음 모델이다.
<br>
가우시안 잡음 모델은 보통 평균이 0인 가우시안 분포를 따르는 잡음을 의미한다.
<br>
<br>
대부분의 영상에 가우시안 잡음이 포함되어 있으며, 많은 컴퓨터 비전 시스템이 가우시안 잡음을 제거하기 위해
<br>
가우시안 필터를 사용한다. 입력 영상에서 픽셀 값이 크게 변하지 않는 평탄한 영역에 가우시안 필터가 적용될 경우는
<br>
주변 픽셀 값이 부드럽게 블러링되면서 잡음의 영향이 크게 줄어든다.
<br>
<br>
그러나 픽셀 값이 급격하게 변경되는 에지 근방에 동일한 가우시안 필터가 적용되면 잡음 뿐만 아니라 에지 성분까지 감소하게 된다.
<br>
이러한 단점을 보완하기 위해 다양한 필터링이 존재한다.

## 양방향 필터
양방향 필터(bilateral filter)란 1998년 토마시(C. Tomasi)가 제안한 에지 성분은 그대로 유지하면서 가우시안 잡음을 효과적으로 제거하는 알고리즘이다.
<br>
OpenCV에서 양방향 필터를 위해 함수를 제공한다.

### bilateraFilter()
```
void bilateralFilter(InputArray src, OutputArray dst, int d, double sigmaColor,
                     double sigmaSpace, int borderType = BORDER_DEFAULT);

src : 입력 영상
dst : 출력 영상
d : 필터링에 사용할 이웃 픽셀과의 거리
sigmaColor : 색 공간에서의 가우시안 필터 표준 편차
sigmaSpace : 좌표 공간에서의 가우시안 필터 표준 편차
borderType : 가장자리 픽셀 확장 방식
```
src 인자는 입력 영상으로 8비트 또는 실수형을 사용하며, 1채널 또는 3채널 영상을 사용한다.
<br>
<br>
dst 인자는 출력 영상으로 src와 같은 크기, 같은 타입을 갖는다.
<br>
<br>
d 인자에 양수가 아닌 값을 지정하면 sigmaSpace로부터 자동 계산된다.
<br>
<br>
bilateralFilter() 함수에서 sigmaSpace 값은 일반적인 가우시안 필터링에서 사용하는 표준 편차와 같은 개념이다.
<br>
<br>
즉, 값이 클수록 더 많은 주변 픽셀을 고려하여 블러링을 수행한다.
<br>
<br>
sigmaColor 값은 주변 픽셀과의 밝기 차이에 관한 표준 편차이며, 값을 작게 지정할 경우 픽셀 값 차이가 큰 주변 픽셀과는 블러링이 적용되지 않는다.
<br>
값을 크게 할 경우 픽셀 값 차이가 조금 크더라도 블러링이 적용된다.
<br>
<br>
즉, sigmaColor 값을 이용하여 어느 정도 발기 차를 갖는 에지를 보존할 것인지를 조정할 수 있다.
